/*! For license information please see 7d242582.dc3d4a12.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[12308],{83712:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=o(24246),n=o(71670);const i={title:"How to Build from Source"},a=void 0,s={id:"how-to-build-from-source",title:"How to Build from Source",description:"You will need to build React Native from source if you want to work on a new feature/bug fix, try out the latest features which are not released yet, or maintain your own fork with patches that cannot be merged to the core.",source:"@site/contributing/how-to-build-from-source.md",sourceDirName:".",slug:"/how-to-build-from-source",permalink:"/contributing/how-to-build-from-source",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/react-native-website/blob/main/website/contributing/how-to-build-from-source.md",tags:[],version:"current",lastUpdatedAt:1688720572,formattedLastUpdatedAt:"Jul 7, 2023",frontMatter:{title:"How to Build from Source"},sidebar:"contributing",previous:{title:"How to Contribute Code",permalink:"/contributing/how-to-contribute-code"},next:{title:"How to Run and Write Tests",permalink:"/contributing/how-to-run-and-write-tests"}},d={},l=[{value:"Android",id:"android",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Point your project to a nightly",id:"point-your-project-to-a-nightly",level:3},{value:"Update your project to build from source",id:"update-your-project-to-build-from-source",level:3},{value:"Additional notes",id:"additional-notes",level:3},{value:"Rationale",id:"rationale",level:2}];function c(e){const t=Object.assign({p:"p",h2:"h2",h3:"h3",a:"a",strong:"strong",pre:"pre",code:"code"},(0,n.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"You will need to build React Native from source if you want to work on a new feature/bug fix, try out the latest features which are not released yet, or maintain your own fork with patches that cannot be merged to the core."}),"\n",(0,r.jsx)(t.h2,{id:"android",children:"Android"}),"\n",(0,r.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.p,{children:["To build from source, you need to have the Android SDK installed. If you followed the ",(0,r.jsx)(t.a,{href:"/docs/environment-setup",children:"Setting up the development environment"})," guide, you should already be set up."]}),"\n",(0,r.jsxs)(t.p,{children:["There is no need to install other tools like specific version of NDK or CMake as the Android SDK will ",(0,r.jsx)(t.strong,{children:"automatically download"})," whatever is needed for the build from source."]}),"\n",(0,r.jsx)(t.h3,{id:"point-your-project-to-a-nightly",children:"Point your project to a nightly"}),"\n",(0,r.jsx)(t.p,{children:"To use the latest fixes and features of React Native, you can update your project to use a nightly version of React Native with:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"yarn add react-native@nightly\n"})}),"\n",(0,r.jsx)(t.p,{children:"This will update your project to use a nightly version of React Native that gets released every night with the latest changes."}),"\n",(0,r.jsx)(t.h3,{id:"update-your-project-to-build-from-source",children:"Update your project to build from source"}),"\n",(0,r.jsxs)(t.p,{children:["Both with stable releases and nightlies, you will be consuming ",(0,r.jsx)(t.strong,{children:"precompiled"})," artifacts. If instead you want to switch to building from source, so you can test your changes to the framework directly, you will have to edit the ",(0,r.jsx)(t.code,{children:"android/settings.gradle"})," file as follows:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-diff",children:'  // ...\n  include \':app\'\n  includeBuild(\'../node_modules/@react-native/gradle-plugin\')\n  \n+ includeBuild(\'../node_modules/react-native\') {\n+     dependencySubstitution {\n+         substitute(module("com.facebook.react:react-android")).using(project(":packages:react-native:ReactAndroid"))\n+         substitute(module("com.facebook.react:react-native")).using(project(":packages:react-native:ReactAndroid"))\n+         substitute(module("com.facebook.react:hermes-android")).using(project(":packages:react-native:ReactAndroid:hermes-engine"))\n+         substitute(module("com.facebook.react:hermes-engine")).using(project(":packages:react-native:ReactAndroid:hermes-engine"))\n+     }\n+ }\n'})}),"\n",(0,r.jsx)(t.h3,{id:"additional-notes",children:"Additional notes"}),"\n",(0,r.jsx)(t.p,{children:"Building from source can take a long time, especially for the first build, as it needs to download ~200 MB of artifacts and compile the native code."}),"\n",(0,r.jsxs)(t.p,{children:["Every time you update the ",(0,r.jsx)(t.code,{children:"react-native"})," version from your repo, the build directory may get deleted, and all the files are re-downloaded.\nTo avoid this, you might want to change your build directory path by editing the ",(0,r.jsx)(t.code,{children:"~/.gradle/init.gradle"})," file:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-groovy",children:'gradle.projectsLoaded {\n    rootProject.allprojects {\n        buildDir = "/path/to/build/directory/${rootProject.name}/${project.name}"\n    }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"rationale",children:"Rationale"}),"\n",(0,r.jsxs)(t.p,{children:["The recommended approach to working with React Native is to always update to the latest version. The support we provide for older versions is ",(0,r.jsx)(t.a,{href:"https://github.com/reactwg/react-native-releases/#releases-support-policy",children:"described in our support policy"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"The build from source approach should be used to end-to-end test a fix before submitting a pull request to React Native, and we're not encouraging its usages in the long run. Especially forking React Native or switching your setup to always use a build from source, will result in projects that are harder to update and generally a worse developer experience."})]})}const u=function(e={}){const{wrapper:t}=Object.assign({},(0,n.ah)(),e.components);return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(c,e)})):c(e)}},71426:(e,t,o)=>{var r=o(27378),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,o){var r,i={},l=null,c=null;for(r in void 0!==o&&(l=""+o),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!d.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:n,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},24246:(e,t,o)=>{e.exports=o(71426)},71670:(e,t,o)=>{o.d(t,{Zo:()=>s,ah:()=>i});var r=o(27378);const n=r.createContext({});function i(e){const t=r.useContext(n);return r.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const a={};function s({components:e,children:t,disableParentContext:o}){let s;return s=o?"function"==typeof e?e({}):e||a:i(e),r.createElement(n.Provider,{value:s},t)}}}]);