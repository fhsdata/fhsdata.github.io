/*! For license information please see e477fa43.0da2360e.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[50337],{81817:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var n=r(24246),i=r(71670);const o={title:"An update on the New Architecture Rollout",authors:["cortinico"],tags:["announcement"],date:new Date("2022-03-15T00:00:00.000Z")},s=void 0,a={permalink:"/blog/2022/03/15/an-update-on-the-new-architecture-rollout",source:"@site/blog/2022-03-15-an-update-on-the-new-architecture-rollout.md",title:"An update on the New Architecture Rollout",description:"Hi everyone,",date:"2022-03-15T00:00:00.000Z",formattedDate:"March 15, 2022",tags:[{label:"announcement",permalink:"/blog/tags/announcement"}],readingTime:6.81,hasTruncateMarker:!0,authors:[{name:"Nicola Corti",title:"Software Engineer at Meta",url:"https://twitter.com/cortinico",imageURL:"https://github.com/cortinico.png",key:"cortinico"}],frontMatter:{title:"An update on the New Architecture Rollout",authors:["cortinico"],tags:["announcement"],date:"2022-03-15T00:00:00.000Z"},unlisted:!1,prevItem:{title:"Announcing React Native 0.68",permalink:"/blog/2022/03/30/version-068"},nextItem:{title:"React Native - H2 2021 Recap",permalink:"/blog/2022/01/21/react-native-h2-2021-recap"}},h={authorsImageUrls:[void 0]},c=[{value:"The Working Group",id:"the-working-group",level:3},{value:"The Migration Guide",id:"the-migration-guide",level:3},{value:"The New Architecture Template",id:"the-new-architecture-template",level:3},{value:"The 3rd-party Libraries Ecosystem",id:"the-3rd-party-libraries-ecosystem",level:3},{value:"Releases",id:"releases",level:3},{value:"Towards Hermes as Default engine",id:"towards-hermes-as-default-engine",level:3}];function l(e){const t=Object.assign({p:"p",a:"a",blockquote:"blockquote",strong:"strong",h3:"h3",em:"em",ul:"ul",li:"li",code:"code"},(0,i.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["Hi everyone,\n",(0,n.jsx)(t.a,{href:"/blog/2022/01/21/react-native-h2-2021-recap#the-new-architecture-rollout-and-releases",children:"As previously announced"}),":"]}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"2022 is going to be the year of the New Architecture in open source"}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["If you still haven\u2019t had the time to look into the New React Native Architecture (the Fabric Renderer and the TurboModule system), there is no better time to do it ",(0,n.jsx)(t.strong,{children:"than now"}),"!"]}),"\n",(0,n.jsx)(t.p,{children:"We would like to share with the community some initiatives and material we prepared to make sure everyone is onboard on this endeavor."}),"\n",(0,n.jsx)(t.h3,{id:"the-working-group",children:"The Working Group"}),"\n",(0,n.jsxs)(t.p,{children:["Recently, we launched the ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture",children:"React Native New Architecture Working Group"})," on GitHub, a ",(0,n.jsx)(t.em,{children:"discussion only"})," repository to coordinate and support the rollout of the New Architecture across the ecosystem."]}),"\n",(0,n.jsxs)(t.p,{children:["We envision this working group as a space where the community can ",(0,n.jsx)(t.strong,{children:"meet"}),", share ",(0,n.jsx)(t.strong,{children:"ideas"}),", and ",(0,n.jsx)(t.strong,{children:"discuss"})," challenges during the adoption of the New Architecture. Moreover, we're going to use this working group to ",(0,n.jsx)(t.strong,{children:"share"})," information and updates with the wider community for the sake of transparency."]}),"\n",(0,n.jsxs)(t.p,{children:["To keep the discussion focused, we decided to have this working group ",(0,n.jsx)(t.strong,{children:"open to read"})," publicly and ",(0,n.jsx)(t.strong,{children:"restricted to write"})," only for approved users."]}),"\n",(0,n.jsxs)(t.p,{children:["If you wish to join the conversation, you can ",(0,n.jsx)(t.a,{href:"https://forms.gle/8emgdwFZXuzEpyyn9",children:"fill in this form"})," to either ",(0,n.jsx)(t.strong,{children:"apply or nominate"})," someone that you think would be a valuable addition to the discussion."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Everyone is welcome"})," to apply to join the conversation."]}),"\n",(0,n.jsxs)(t.p,{children:["As every discussion forum, we would like to stress once more the importance of being ",(0,n.jsx)(t.strong,{children:"respectful"})," and welcoming towards others\u2019 opinions. Please take the chance to read our ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/blob/main/CODE_OF_CONDUCT.md",children:(0,n.jsx)(t.strong,{children:"code of conduct"})})," if you haven\u2019t yet done it."]}),"\n",(0,n.jsx)(t.h3,{id:"the-migration-guide",children:"The Migration Guide"}),"\n",(0,n.jsxs)(t.p,{children:["After several rounds of review & feedback, we finally merged ",(0,n.jsx)(t.strong,{children:"the Migration Guide"})," (f.k.a. ",(0,n.jsx)(t.em,{children:"the Playbook"}),"). You can find it ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture#guides",children:"on the New Architecture working group."})]}),"\n",(0,n.jsxs)(t.p,{children:["This Migration Guide will show you ",(0,n.jsx)(t.strong,{children:"how to create a custom Fabric component or a TurboModule"})," with a step-by-step approach. The guide will also show you how to ",(0,n.jsx)(t.strong,{children:"adapt your existing app or library"})," to use the New Architecture."]}),"\n",(0,n.jsxs)(t.p,{children:["Moreover, we would like to remind you the brand-new ",(0,n.jsx)(t.a,{href:"/architecture/overview",children:"Architecture section"})," of our website. There you can find several in-depth articles and explanation of the React Native internals. Specifically, ",(0,n.jsx)(t.a,{href:"/architecture/fabric-renderer",children:"the Fabric section"})," can help you understand the rendering pipeline in the New Architecture world."]}),"\n",(0,n.jsxs)(t.p,{children:["Finally, please consider ",(0,n.jsx)(t.strong,{children:"sharing your feedback"})," to this documentation material ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/7",children:"on the working group"}),". We\u2019re constantly looking for developer\u2019s opinion, and we want to make sure we\u2019re delivering the content that you find most useful."]}),"\n",(0,n.jsx)(t.p,{children:"Over the next months, we will look into refining and adding more documentation to help you further."}),"\n",(0,n.jsx)(t.h3,{id:"the-new-architecture-template",children:"The New Architecture Template"}),"\n",(0,n.jsxs)(t.p,{children:["React Native ",(0,n.jsx)(t.strong,{children:"0.68.0"})," is close to release. This version of React Native marks a crucial milestone in the New Architecture Rollout as it\u2019s the first version to include an ",(0,n.jsx)(t.strong,{children:"opt-in switch"})," in the ",(0,n.jsx)(t.strong,{children:"new app template."})]}),"\n",(0,n.jsxs)(t.p,{children:["This means that you will be able to try the New Architecture ",(0,n.jsx)(t.strong,{children:"by changing one line"})," in the template. We also added extensive ",(0,n.jsx)(t.strong,{children:"comments and documentation"})," to the template to make sure you don\u2019t need extra reading to use it out of the box. We hope this will help you adopt the New Architecture by ",(0,n.jsx)(t.strong,{children:"reducing the amount of code"})," your have to write."]}),"\n",(0,n.jsx)(t.p,{children:"In the next releases, we will keep on updating the template to make it even more streamlined and simple to use."}),"\n",(0,n.jsx)(t.p,{children:"To enable the New Architecture on either platform, you can:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["On iOS, run ",(0,n.jsx)(t.code,{children:"RCT_NEW_ARCH_ENABLED=1 bundle exec pod install"})," inside the ",(0,n.jsx)(t.code,{children:"ios"})," folder."]}),"\n",(0,n.jsxs)(t.li,{children:["On Android, set the ",(0,n.jsx)(t.code,{children:"newArchEnabled"})," property to ",(0,n.jsx)(t.code,{children:"true"})," by ",(0,n.jsx)(t.strong,{children:"either"}),":","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Changing the corresponding line inside the ",(0,n.jsx)(t.code,{children:"android/gradle.properties"})," file."]}),"\n",(0,n.jsxs)(t.li,{children:["Set an environment variable ",(0,n.jsx)(t.code,{children:"ORG_GRADLE_PROJECT_newArchEnabled=true"})]}),"\n",(0,n.jsxs)(t.li,{children:["Invoke Gradle with ",(0,n.jsx)(t.code,{children:"-PnewArchEnabled=true"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Then you can ",(0,n.jsx)(t.strong,{children:"run your app"})," with ",(0,n.jsx)(t.code,{children:"yarn react-native run-android"})," or ",(0,n.jsx)(t.code,{children:"run-ios"})," and you\u2019ll be running using Fabric and TurboModules enabled."]}),"\n",(0,n.jsxs)(t.p,{children:["Please consider trying this new template, and ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/5",children:"report any bug or unexpected behavior"})," that you might face. Over the last months we worked hard to fix bugs and build failures that would have been ",(0,n.jsx)(t.strong,{children:"hard to catch"})," without the constant community feedback and testing."]}),"\n",(0,n.jsx)(t.h3,{id:"the-3rd-party-libraries-ecosystem",children:"The 3rd-party Libraries Ecosystem"}),"\n",(0,n.jsxs)(t.p,{children:["The community won't be able to migrate to the New Architecture without the full support of ",(0,n.jsx)(t.strong,{children:"3rd-party libraries author & maintainers"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["We understand how this can be a tedious process, and we understand the importance of supporting users on ",(0,n.jsx)(t.strong,{children:"both"})," old and New Architecture. Over the next months, we will focus on supporting our library developers to help them migrate over."]}),"\n",(0,n.jsxs)(t.p,{children:["If you\u2019re a ",(0,n.jsx)(t.strong,{children:"library developer"}),", ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/categories/libraries",children:"we invite you to post an update"})," in the New Architecture working group with the ",(0,n.jsx)(t.strong,{children:"status of your libraries"}),". This will help you attract early adopters and us to understand if any library is facing a blocker."]}),"\n",(0,n.jsxs)(t.p,{children:["If instead you\u2019re a ",(0,n.jsx)(t.strong,{children:"library user"}),", you can ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/6",children:"post a message here"})," to request a migration of a library. If we identify a library that becomes a blocker for a number of users, we will try to reach out to the maintainer and understand why they haven\u2019t migrated yet."]}),"\n",(0,n.jsxs)(t.p,{children:["Finally, we would like to give a shout out to Software Mansion for releasing a new version of ",(0,n.jsx)(t.a,{href:"https://github.com/software-mansion/react-native-screens",children:(0,n.jsx)(t.code,{children:"react-native-screens"})}),", which has support for both architectures. Moreover, they published a blog-post (",(0,n.jsx)(t.a,{href:"https://blog.swmansion.com/introducing-fabric-to-react-native-screens-fd17bf18858e",children:"Introducing Fabric to react-native-screens"}),") where they ",(0,n.jsx)(t.strong,{children:"tell their migration story"}),". We hope you will find this story inspiring and useful to tackle your migration."]}),"\n",(0,n.jsx)(t.h3,{id:"releases",children:"Releases"}),"\n",(0,n.jsxs)(t.p,{children:["Work on the 0.68 pre-release has realized much of ",(0,n.jsx)(t.a,{href:"/blog/2022/01/19/version-067#improvements-to-release-process",children:"the improved release process we had defined last half"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"We\u2019re happy to share that with 0.68 we were able to:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Successfully onboard release work to an internal rotation. Much of this is supported by ",(0,n.jsx)(t.a,{href:"/contributing/overview",children:"improved documentation"})," on the release process which will reduce the bus factor of the release process."]}),"\n",(0,n.jsxs)(t.li,{children:["Initiated discussions with partners to support a ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-releases/blob/main/docs/roles-and-responsibilities.md",children:"Copilot rotation"}),". We hope this effort will improve transparency of the process and inform our partners where to invest to support React Native releases and eco-system."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-releases/discussions/11",children:"Onboarded several Release Supporters and Testers from the community"}),". We had put a call-out for help last half and so many folks stepped up! The feedback from our testers and supporters have ",(0,n.jsx)(t.strong,{children:"helped us fix crucial bugs"})," and regressions, especially around the new architecture, for the upcoming release. Thank you to everyone who signed up and tested out the release!"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["With React Native 0.69 we will continue refining this process, ideally getting partners to provide earlier release signal and onboarding co-pilots. As always, ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-releases/discussions",children:"any feedback is more than welcome"}),". If you\u2019d like to join as a release tester or supporter, ",(0,n.jsx)(t.a,{href:"https://forms.gle/fPuPE1MZRDGWNqpd6",children:"please sign up here"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"towards-hermes-as-default-engine",children:"Towards Hermes as Default engine"}),"\n",(0,n.jsxs)(t.p,{children:["One of the crucial point of the New Architecture Rollout is the adoption of the new JavaScript engine: ",(0,n.jsx)(t.strong,{children:"Hermes."})]}),"\n",(0,n.jsxs)(t.p,{children:["With the New React Native Architecture, we\u2019re going to ",(0,n.jsx)(t.strong,{children:"set Hermes as default engine"}),". This means that all the new documentation and templates will have Hermes enabled."]}),"\n",(0,n.jsxs)(t.p,{children:["Please note that we'll continue working with the community to make sure ",(0,n.jsx)(t.strong,{children:"other engines"}),", such as JSC (JavaScript Core), ",(0,n.jsx)(t.strong,{children:"are supported"}),". You can still use the engine you wish, but you\u2019ll have to ",(0,n.jsx)(t.strong,{children:"explicitly disable Hermes"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["To improve the stability of Hermes, we\u2019re working towards changing the ",(0,n.jsx)(t.strong,{children:"distribution model"})," of Hermes. Specifically, we envision the Hermes release process ",(0,n.jsx)(t.strong,{children:"to be closer"})," to the React Native release process."]}),"\n",(0,n.jsxs)(t.p,{children:["This will allow us to ship a version of React Native, with a bundled JS engine that is ",(0,n.jsx)(t.strong,{children:"fully compatible"}),". You won\u2019t have to deal with run-time crashes and Hermes incompatibilities that are really hard to debug and understand."]}),"\n",(0,n.jsxs)(t.p,{children:["Moreover, this will ",(0,n.jsx)(t.strong,{children:"shorten the cycle"})," for picking up ",(0,n.jsx)(t.strong,{children:"improvements"})," and bug fixes in Hermes, which will allow us to be more ",(0,n.jsx)(t.strong,{children:"responsive"})," to the needs of React Native users."]}),"\n",(0,n.jsxs)(t.p,{children:["We will be sharing more on this matter in the coming months. In the meanwhile, feel free to ",(0,n.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/4",children:"join the discussion"})," about it on the Working Group."]}),"\n",(0,n.jsx)(t.p,{children:"If you haven\u2019t tried Hermes yet, now is the time to give it a go. And please make sure to flag any issues or blockers you might face."}),"\n",(0,n.jsx)(t.p,{children:"With this, that\u2019s a wrap."}),"\n",(0,n.jsx)(t.p,{children:"I\u2019d like to thank Andrei, Aleksandar, Dmitry, Eli, Luna, H\xe9ctor & Neil for reviewing this blog-post and providing valuable contributions to those efforts."}),"\n",(0,n.jsxs)(t.p,{children:["And looking forward to ",(0,n.jsx)(t.strong,{children:"reading your migration stories"}),"."]})]})}const d=function(e={}){const{wrapper:t}=Object.assign({},(0,i.ah)(),e.components);return t?(0,n.jsx)(t,Object.assign({},e,{children:(0,n.jsx)(l,e)})):l(e)}},71426:(e,t,r)=>{var n=r(27378),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,o={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!h.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},24246:(e,t,r)=>{e.exports=r(71426)},71670:(e,t,r)=>{r.d(t,{Zo:()=>a,ah:()=>o});var n=r(27378);const i=n.createContext({});function o(e){const t=n.useContext(i);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const s={};function a({components:e,children:t,disableParentContext:r}){let a;return a=r?"function"==typeof e?e({}):e||s:o(e),n.createElement(i.Provider,{value:a},t)}}}]);