/*! For license information please see 925bf856.65eb0e5a.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[70471],{7623:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var i=t(24246),a=t(71670);const r={id:"timers",title:"Timers"},s=void 0,o={id:"timers",title:"Timers",description:"Timers are an important part of an application and React Native implements the browser timers.",source:"@site/versioned_docs/version-0.73/timers.md",sourceDirName:".",slug:"/timers",permalink:"/docs/timers",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/react-native-website/blob/main/website/../docs/timers.md",tags:[],version:"0.73",lastUpdatedAt:1702040446,formattedLastUpdatedAt:"Dec 8, 2023",frontMatter:{id:"timers",title:"Timers"},sidebar:"docs",previous:{title:"JavaScript Environment",permalink:"/docs/javascript-environment"},next:{title:"Using Hermes",permalink:"/docs/hermes"}},c={},l=[{value:"Timers",id:"timers",level:2},{value:"InteractionManager",id:"interactionmanager",level:2}];function d(e){const n=Object.assign({p:"p",a:"a",h2:"h2",ul:"ul",li:"li",code:"code",admonition:"admonition",pre:"pre"},(0,a.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Timers are an important part of an application and React Native implements the ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals",children:"browser timers"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"timers",children:"Timers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"setTimeout, clearTimeout"}),"\n",(0,i.jsx)(n.li,{children:"setInterval, clearInterval"}),"\n",(0,i.jsx)(n.li,{children:"setImmediate, clearImmediate"}),"\n",(0,i.jsx)(n.li,{children:"requestAnimationFrame, cancelAnimationFrame"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"requestAnimationFrame(fn)"})," is not the same as ",(0,i.jsx)(n.code,{children:"setTimeout(fn, 0)"})," - the former will fire after all the frames have flushed, whereas the latter will fire as quickly as possible (over 1000x per second on a iPhone 5S)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"setImmediate"})," is executed at the end of the current JavaScript execution block, right before sending the batched response back to native. Note that if you call ",(0,i.jsx)(n.code,{children:"setImmediate"})," within a ",(0,i.jsx)(n.code,{children:"setImmediate"})," callback, it will be executed right away, it won't yield back to native in between."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Promise"})," implementation uses ",(0,i.jsx)(n.code,{children:"setImmediate"})," as its asynchronicity implementation."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["When debugging on Android, if the times between the debugger and device have drifted; things such as animation, event behavior, etc., might not work properly or the results may not be accurate.\nPlease correct this by running ",(0,i.jsx)(n.code,{children:'adb shell "date `date +%m%d%H%M%Y.%S%3N`"'})," on your debugger machine. Root access is required for the use in real device."]})}),"\n",(0,i.jsx)(n.h2,{id:"interactionmanager",children:"InteractionManager"}),"\n",(0,i.jsxs)(n.p,{children:["One reason why well-built native apps feel so smooth is by avoiding expensive operations during interactions and animations. In React Native, we currently have a limitation that there is only a single JS execution thread, but you can use ",(0,i.jsx)(n.code,{children:"InteractionManager"})," to make sure long-running work is scheduled to start after any interactions/animations have completed."]}),"\n",(0,i.jsx)(n.p,{children:"Applications can schedule tasks to run after interactions with the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"InteractionManager.runAfterInteractions(() => {\n  // ...long-running synchronous task...\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Compare this to other scheduling alternatives:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"requestAnimationFrame(): for code that animates a view over time."}),"\n",(0,i.jsx)(n.li,{children:"setImmediate/setTimeout/setInterval(): run code later, note this may delay animations."}),"\n",(0,i.jsx)(n.li,{children:"runAfterInteractions(): run code later, without delaying active animations."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The touch handling system considers one or more active touches to be an 'interaction' and will delay ",(0,i.jsx)(n.code,{children:"runAfterInteractions()"})," callbacks until all touches have ended or been cancelled."]}),"\n",(0,i.jsx)(n.p,{children:"InteractionManager also allows applications to register animations by creating an interaction 'handle' on animation start, and clearing it upon completion:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const handle = InteractionManager.createInteractionHandle();\n// run animation... (`runAfterInteractions` tasks are queued)\n// later, on animation completion:\nInteractionManager.clearInteractionHandle(handle);\n// queued tasks run if all handles were cleared\n"})})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(d,e)})):d(e)}},71426:(e,n,t)=>{var i=t(27378),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var i,r={},l=null,d=null;for(i in void 0!==t&&(l=""+t),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(d=n.ref),n)s.call(n,i)&&!c.hasOwnProperty(i)&&(r[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===r[i]&&(r[i]=n[i]);return{$$typeof:a,type:e,key:l,ref:d,props:r,_owner:o.current}}n.Fragment=r,n.jsx=l,n.jsxs=l},24246:(e,n,t)=>{e.exports=t(71426)},71670:(e,n,t)=>{t.d(n,{Zo:()=>o,ah:()=>r});var i=t(27378);const a=i.createContext({});function r(e){const n=i.useContext(a);return i.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const s={};function o({components:e,children:n,disableParentContext:t}){let o;return o=t?"function"==typeof e?e({}):e||s:r(e),i.createElement(a.Provider,{value:o},n)}}}]);