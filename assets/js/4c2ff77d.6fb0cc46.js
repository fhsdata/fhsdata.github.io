/*! For license information please see 4c2ff77d.6fb0cc46.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[64204],{30170:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=n(24246),r=n(71670);const o={title:"Announcing React Native 0.70",authors:["dmytrorykun","titozzz","cortinico","kelset"],tags:["announcement","release"]},a="Announcing 0.70",s={permalink:"/blog/2022/09/05/version-070",source:"@site/blog/2022-09-05-version-070.md",title:"Announcing React Native 0.70",description:"We are excited to release a new version of React Native, 0.70.0. This version comes with several improvements like a new unified configuration for Codegen, Hermes as default engine, and full CMake support for Android builds along with a refresh of the documentation for the New Architecture. Read on to learn more!",date:"2022-09-05T00:00:00.000Z",formattedDate:"September 5, 2022",tags:[{label:"announcement",permalink:"/blog/tags/announcement"},{label:"release",permalink:"/blog/tags/release"}],readingTime:4.6,hasTruncateMarker:!0,authors:[{name:"Dmytro Rykun",title:"Software Engineer at Meta",url:"https://github.com/dmytrorykun",imageURL:"https://github.com/dmytrorykun.png",key:"dmytrorykun"},{name:"Thibault Malbranche",title:"Lead Mobile Engineer at Brigad",url:"https://twitter.com/titozzz",imageURL:"https://github.com/titozzz.png",key:"titozzz"},{name:"Nicola Corti",title:"Software Engineer at Meta",url:"https://twitter.com/cortinico",imageURL:"https://github.com/cortinico.png",key:"cortinico"},{name:"Lorenzo Sciandra",title:"Senior Software Engineer at Microsoft",url:"https://twitter.com/kelset",imageURL:"https://github.com/kelset.png",key:"kelset"}],frontMatter:{title:"Announcing React Native 0.70",authors:["dmytrorykun","titozzz","cortinico","kelset"],tags:["announcement","release"]},unlisted:!1,prevItem:{title:"React Native Core Contributor Summit 2022",permalink:"/blog/2022/11/22/react-native-core-contributor-summit-2022"},nextItem:{title:"Hermes as the Default",permalink:"/blog/2022/07/08/hermes-as-the-default"}},c={authorsImageUrls:[void 0,void 0,void 0,void 0]},l=[{value:"Sections",id:"sections",level:3},{value:"New Architecture\u2019s New Documentation",id:"new-architectures-new-documentation",level:2},{value:"Hermes as default engine",id:"hermes-as-default-engine",level:2},{value:"A new unified configuration for Codegen",id:"a-new-unified-configuration-for-codegen",level:2},{value:"Android Auto-linking for New Architecture libraries",id:"android-auto-linking-for-new-architecture-libraries",level:2},{value:"Full CMake support for Android builds",id:"full-cmake-support-for-android-builds",level:2},{value:"Highlights of 0.70",id:"highlights-of-070",level:2},{value:"Breaking changes",id:"breaking-changes",level:3},{value:"Upgrades",id:"upgrades",level:3},{value:"Acknowledgements",id:"acknowledgements",level:3}];function d(e){const t=Object.assign({p:"p",h3:"h3",ul:"ul",li:"li",a:"a",h2:"h2",code:"code",pre:"pre"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"We are excited to release a new version of React Native, 0.70.0. This version comes with several improvements like a new unified configuration for Codegen, Hermes as default engine, and full CMake support for Android builds along with a refresh of the documentation for the New Architecture. Read on to learn more!"}),"\n",(0,i.jsx)(t.h3,{id:"sections",children:"Sections"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#new-architectures-new-documentation",children:"New Architecture\u2019s New Documentation"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#hermes-as-default-engine",children:"Hermes as default engine"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#a-new-unified-configuration-for-codegen",children:"A new unified configuration for Codegen"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#android-auto-linking-for-new-architecture-libraries",children:"Android Auto-linking for New Architecture libraries"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#full-cmake-support-for-android-builds",children:"Full CMake support for Android builds"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/blog/2022/09/05/version-070#highlights-of-070",children:"Highlights of 0.70"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"new-architectures-new-documentation",children:"New Architecture\u2019s New Documentation"}),"\n",(0,i.jsxs)(t.p,{children:["Over the last few months, we have been working to add more content to the ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/next/the-new-architecture/landing-page",children:"New Architecture"})," section of the documentation. In the new section you can find migration guides, examples and tutorials to get you up to speed."]}),"\n",(0,i.jsxs)(t.p,{children:["Along with it, you can find new documents diving into ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/next/the-new-architecture/why",children:"Why a New Architecture"})," and ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/next/the-new-architecture/pillars",children:"the various parts of it"}),". We hope this helps you better understand the rationale behind the new APIs."]}),"\n",(0,i.jsxs)(t.p,{children:["Any feedback is more than welcome, please let us know in the ",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native-website",children:"react-native-website"})," repository."]}),"\n",(0,i.jsx)(t.h2,{id:"hermes-as-default-engine",children:"Hermes as default engine"}),"\n",(0,i.jsx)(t.p,{children:"React Native 0.70 is the first version with Hermes, our in-house JS engine, enabled by default."}),"\n",(0,i.jsx)(t.p,{children:"This is the result of collaborative effort between the Hermes team and the React Native team, alongside with the priceless contributions from the community. We worked to improve and fine tune Hermes to make it more performant and deliver highly requested features by the community."}),"\n",(0,i.jsxs)(t.p,{children:["You can read more about it in the ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/blog/2022/07/08/hermes-as-the-default",children:"official announcement blogpost"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"a-new-unified-configuration-for-codegen",children:"A new unified configuration for Codegen"}),"\n",(0,i.jsxs)(t.p,{children:["With 0.70, we introduced a unified way to define the Codegen specs for both iOS and Android. Previously, you had to put the Android configuration in a separate ",(0,i.jsx)(t.code,{children:"build.gradle"})," file."]}),"\n",(0,i.jsx)(t.p,{children:"Now, you can define it directly in the package.json with:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'  "codegenConfig": {\n    "name": "CustomAnimationView",\n    "type": "components",\n    "jsSrcsDir": "./src",\n    "android": {\n      "javaPackageName": "com.custom.animation"\n    }\n  }\n'})}),"\n",(0,i.jsx)(t.p,{children:"This improvement provides a more consistent experience for library maintainers in migrating their codebases to the New Architecture."}),"\n",(0,i.jsxs)(t.p,{children:["If you are a library maintainer, please make sure to let us know how the process is going for you in ",(0,i.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/6",children:"this discussion"})," in the ",(0,i.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture",children:"React Native New Architecture working group"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"android-auto-linking-for-new-architecture-libraries",children:"Android Auto-linking for New Architecture libraries"}),"\n",(0,i.jsx)(t.p,{children:"With 0.70, users on New Architecture are able to automatically link libraries without any additional configuration on their Android.mk or CMake files."}),"\n",(0,i.jsxs)(t.p,{children:["Autolinking is a crucial part of the React Native development experience. It allows you to include external libraries with a ",(0,i.jsx)(t.code,{children:"yarn add"})," command, without dealing with CocoaPods or Gradle setups."]}),"\n",(0,i.jsx)(t.p,{children:"The New Architecture required us to adapt the auto-linking features to support libraries which are using the Codegen and exposing native code to app developers."}),"\n",(0,i.jsxs)(t.p,{children:["While Autolinking worked well for New Architecture libraries on iOS, the same was not true for Android. With 0.70 we closed this gap and you can now keep on including libraries with ",(0,i.jsx)(t.code,{children:"yarn add"})," to your project: they will be linked correctly on any architecture."]}),"\n",(0,i.jsx)(t.h2,{id:"full-cmake-support-for-android-builds",children:"Full CMake support for Android builds"}),"\n",(0,i.jsx)(t.p,{children:"Starting from 0.70, users can now use CMake to configure their Native builds. While we don\u2019t expect app users to directly write C++ code, you still need an entry point for the native compilation."}),"\n",(0,i.jsxs)(t.p,{children:["From now on you can use a ",(0,i.jsx)(t.code,{children:"CMakeLists.txt"})," file instead of an ",(0,i.jsx)(t.code,{children:"Android.mk"})," file for anything Android/Native related in your project."]}),"\n",(0,i.jsx)(t.p,{children:"This change benefits both app and library users on the New Architecture as:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["The CMake file created in your app is way smaller (",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/blob/9923ac1b524ae959abdf50a28a3094198015f77e/packages/rn-tester/android/app/src/main/jni/CMakeLists.txt#L6-L11",children:"3 lines of code"})," versus ",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/blob/main/template/android/app/src/main/jni/Android.mk?rgh-link-date=2022-07-20T18%3A29%3A07Z",children:"50+ for Android.mk files"}),"). This makes for an easier update experience between React Native versions in the future and less code to maintain on your end."]}),"\n",(0,i.jsxs)(t.li,{children:["Codegen is now generating both ",(0,i.jsx)(t.code,{children:"Android.mk"})," and ",(0,i.jsx)(t.code,{children:"CMakeLists.txt"}),", so libraries should not worry about doing anything if they're using the default setup we provide for New Architecture libraries."]}),"\n",(0,i.jsx)(t.li,{children:"The Auto-linking mentioned above will work with both CMake and Android.mk files out of the box."}),"\n",(0,i.jsxs)(t.li,{children:["Despite apps being free to use either ",(0,i.jsx)(t.code,{children:"Android.mk"})," or CMake files, the recommended solution in the future would be CMake files (due to better documentation, tooling and ecosystem around CMake)."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"highlights-of-070",children:"Highlights of 0.70"}),"\n",(0,i.jsx)(t.p,{children:"As mentioned above, some of the more important improvements in this release are centered around the New Architecture experience. However, there have been other notable changes, including:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Fix for Catalyst is live, set ",(0,i.jsx)(t.code,{children:"mac_catalyst_enabled"})," to ",(0,i.jsx)(t.code,{children:"true"})," in Podfile (see ",(0,i.jsx)(t.a,{href:"https://react-native-community.github.io/upgrade-helper/?from=0.69.1&to=0.70.0-rc.0",children:"upgrade-helper"})," diff for details)."]}),"\n",(0,i.jsxs)(t.li,{children:["Bumping metro to 0.72.0 which will enable the new React JSX Transform: ",(0,i.jsx)(t.a,{href:"https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html",children:"reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Removing ",(0,i.jsx)(t.code,{children:"reactnativeutilsjni"})," as it is built from the same sources as ",(0,i.jsx)(t.code,{children:"reactnativejni"})," which results in ~220 KBs saved from every Android APK build. (",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/pull/34339",children:"https://github.com/facebook/react-native/pull/34339"}),")."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,i.jsx)(t.p,{children:"There have also been a few breaking changes:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Removed jest/preprocessor from the react-native package (",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/commit/0301cb285b2e85b48a397fe58d565196654d9754",children:"0301cb285b"})," by ",(0,i.jsx)(t.a,{href:"https://github.com/motiz88",children:"@motiz88"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:["Remove nonstandard ",(0,i.jsx)(t.code,{children:"Promise.prototype.done"})," (",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/commit/018d5cf985497273dd700b56168cf1cf64f498d5",children:"018d5cf985"})," by ",(0,i.jsx)(t.a,{href:"https://github.com/motiz88",children:"@motiz88"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Please also note that the version of Metro has been bumped to 0.72, which comes ",(0,i.jsx)(t.a,{href:"https://github.com/facebook/metro/releases/tag/v0.72.0",children:"with 5 breaking changes"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"upgrades",children:"Upgrades"}),"\n",(0,i.jsx)(t.p,{children:"And we upgraded some of our dependencies:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Bump RN CLI to v9.0.0"}),"\n",(0,i.jsx)(t.li,{children:"Bump Android Gradle Plugin to 7.2.1"}),"\n",(0,i.jsx)(t.li,{children:"Bump Gradle to 7.5.1"}),"\n",(0,i.jsx)(t.li,{children:"Bump RCT-Folly to 2021-07-22"}),"\n",(0,i.jsx)(t.li,{children:"Bump Metro to 0.72"}),"\n",(0,i.jsx)(t.li,{children:"Bump SoLoader to 0.10.4"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["You can check out the full list of changes ",(0,i.jsx)(t.a,{href:"https://github.com/facebook/react-native/blob/main/CHANGELOG.md",children:"in the changelog"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"acknowledgements",children:"Acknowledgements"}),"\n",(0,i.jsx)(t.p,{children:"88 contributors with their 493 commits have helped to make this release possible - thanks everyone! We are also thankful to everyone else who gave their feedback to ensure this release would be as stable as possible."})]})}const h=function(e={}){const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,i.jsx)(t,Object.assign({},e,{children:(0,i.jsx)(d,e)})):d(e)}},71426:(e,t,n)=>{var i=n(27378),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,o={},l=null,d=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,i)&&!c.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:d,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},24246:(e,t,n)=>{e.exports=n(71426)},71670:(e,t,n)=>{n.d(t,{Zo:()=>s,ah:()=>o});var i=n(27378);const r=i.createContext({});function o(e){const t=i.useContext(r);return i.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const a={};function s({components:e,children:t,disableParentContext:n}){let s;return s=n?"function"==typeof e?e({}):e||a:o(e),i.createElement(r.Provider,{value:s},t)}}}]);