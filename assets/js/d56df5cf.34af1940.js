/*! For license information please see d56df5cf.34af1940.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[61226],{91115:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var a=r(24246),n=r(71670);r(48375),r(86386),r(11674);function i(e){const t=Object.assign({admonition:"admonition",p:"p",strong:"strong",a:"a"},(0,n.ah)(),e.components);return(0,a.jsxs)(t.admonition,{type:"caution",children:[(0,a.jsxs)(t.p,{children:["This documentation is still ",(0,a.jsx)(t.strong,{children:"experimental"})," and details are subject to changes as we iterate. Feel free to share your feedback on the ",(0,a.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/8",children:"discussion inside the working group"})," for this page."]}),(0,a.jsxs)(t.p,{children:["Moreover, it contains several ",(0,a.jsx)(t.strong,{children:"manual steps"}),". Please note that this won't be representative of the final developer experience once the New Architecture is stable. We're working on tools, templates and libraries to help you get started fast on the New Architecture, without having to go through the whole setup."]})]})}const o=function(e={}){const{wrapper:t}=Object.assign({},(0,n.ah)(),e.components);return t?(0,a.jsx)(t,Object.assign({},e,{children:(0,a.jsx)(i,e)})):i(e)},s={id:"react-18-and-react-native",title:"React 18 & React Native"},l=void 0,c={id:"react-18-and-react-native",title:"React 18 & React Native",description:"This page describes how to use React 18 with React Native using the React Native's New Architecture.",source:"@site/../docs/react-18-and-react-native.md",sourceDirName:".",slug:"/react-18-and-react-native",permalink:"/docs/next/react-18-and-react-native",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/react-native-website/blob/main/website/../docs/react-18-and-react-native.md",tags:[],version:"current",lastUpdatedAt:1707746817,formattedLastUpdatedAt:"Feb 12, 2024",frontMatter:{id:"react-18-and-react-native",title:"React 18 & React Native"}},u={},d=[{value:"React 18 and the React Native New Architecture",id:"react-18-and-the-react-native-new-architecture",level:2},{value:"Note for the Old Architecture users",id:"note-for-the-old-architecture-users",level:3}];function h(e){const t=Object.assign({p:"p",blockquote:"blockquote",strong:"strong",code:"code",h2:"h2",a:"a",ul:"ul",li:"li",h3:"h3"},(0,n.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{}),"\n",(0,a.jsx)(t.p,{children:"This page describes how to use React 18 with React Native using the React Native's New Architecture."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"tl;dr:"})," The first version of React Native compatible with React 18 is ",(0,a.jsx)(t.strong,{children:"0.69.0"}),". In order to use the new features in React 18 including automatic batching, ",(0,a.jsx)(t.code,{children:"startTransition"}),", and ",(0,a.jsx)(t.code,{children:"useDeferredValue"}),", you must migrate your React Native app to the New Architecture."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"react-18-and-the-react-native-new-architecture",children:"React 18 and the React Native New Architecture"}),"\n",(0,a.jsxs)(t.p,{children:["React 18 introduces ",(0,a.jsx)(t.a,{href:"https://reactjs.org/blog/2022/03/29/react-v18.html",children:"several new features"})," including:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Automatic batching"}),"\n",(0,a.jsx)(t.li,{children:"New Strict Mode behaviors"}),"\n",(0,a.jsxs)(t.li,{children:["New hooks (",(0,a.jsx)(t.code,{children:"useId"}),", ",(0,a.jsx)(t.code,{children:"useSyncExternalStore"}),")"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"It also includes new concurrent features:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.code,{children:"startTransition"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.code,{children:"useTransition"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.code,{children:"useDeferredValue"})}),"\n",(0,a.jsx)(t.li,{children:"Full Suspense support"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"The concurrent features in React 18 are built on top of the new concurrent rendering engine. Concurrent rendering is a new behind-the-scenes mechanism that enables React to prepare multiple versions of your UI at the same time."}),"\n",(0,a.jsxs)(t.p,{children:["Previous versions of React Native built on the old architecture ",(0,a.jsx)(t.strong,{children:"cannot"})," support concurrent rendering or concurrent features. This is because the old architecture relied on mutating the native trees, which doesn\u2019t allow for React to prepare multiple versions of the tree at the same time."]}),"\n",(0,a.jsxs)(t.p,{children:["Fortunately, the New Architecture was written bottom-up with concurrent rendering in mind, and is fully compatible with React 18. This means, in order to upgrade to React 18 in your React Native app, your application ",(0,a.jsx)(t.strong,{children:"needs to use the React Native's New Architecture"})," including Fabric Native Components and Turbo Native Modules."]}),"\n",(0,a.jsxs)(t.p,{children:["This means you\u2019re able to use the new features in React 18 as soon as flip the New Architecture switch. Since the new concurrent features are opt-in by using features like ",(0,a.jsx)(t.code,{children:"startTransition"})," or ",(0,a.jsx)(t.code,{children:"Suspense"}),", we expect React 18 to work out-of-the-box with minimal changes for users who migrate to the New Architecture or create a new app with the New Architecture enabled."]}),"\n",(0,a.jsx)(t.h3,{id:"note-for-the-old-architecture-users",children:"Note for the Old Architecture users"}),"\n",(0,a.jsxs)(t.p,{children:["Apps that are still on the Old Architecture will use React 17 mode even if React 18 is listed as a dependency in the ",(0,a.jsx)(t.code,{children:"package.json"})," file."]})]})}const p=function(e={}){const{wrapper:t}=Object.assign({},(0,n.ah)(),e.components);return t?(0,a.jsx)(t,Object.assign({},e,{children:(0,a.jsx)(h,e)})):h(e)}},86386:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(27378),n=r(38944);const i={tabItem:"tabItem_wHwb"};var o=Object.defineProperty,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(s)for(var r of s(t))c.call(t,r)&&u(e,r,t[r]);return e};function h({children:e,hidden:t,className:r}){return a.createElement("div",d({role:"tabpanel",className:(0,n.Z)(i.tabItem,r)},{hidden:t}),e)}},48375:(e,t,r)=>{r.d(t,{Z:()=>M});var a=r(27378),n=r(38944),i=r(12112),o=r(3620),s=r(69490),l=r(14953),c=r(27886),u=r(7106),d=Object.defineProperty,h=Object.defineProperties,p=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&m(e,r,t[r]);if(b)for(var r of b(t))v.call(t,r)&&m(e,r,t[r]);return e},w=(e,t)=>h(e,p(t));function y(e){var t,r;return null!=(r=null==(t=a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))?r:[]}function j(e){const{values:t,children:r}=e;return(0,a.useMemo)((()=>{const e=null!=t?t:function(e){return y(e).map((({props:{value:e,label:t,attributes:r,default:a}})=>({value:e,label:t,attributes:r,default:a})))}(r);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function x({value:e,tabValues:t}){return t.some((t=>t.value===e))}function O({queryString:e=!1,groupId:t}){const r=(0,o.k6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:e,groupId:t});return[(0,l._X)(n),(0,a.useCallback)((e=>{if(!n)return;const t=new URLSearchParams(r.location.search);t.set(n,e),r.replace(w(g({},r.location),{search:t.toString()}))}),[n,r])]}function N(e){const{defaultValue:t,queryString:r=!1,groupId:n}=e,i=j(e),[o,l]=(0,a.useState)((()=>function({defaultValue:e,tabValues:t}){var r;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=null!=(r=t.find((e=>e.default)))?r:t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:i}))),[c,d]=O({queryString:r,groupId:n}),[h,p]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,n]=(0,u.Nk)(t);return[r,(0,a.useCallback)((e=>{t&&n.set(e)}),[t,n])]}({groupId:n}),b=(()=>{const e=null!=c?c:h;return x({value:e,tabValues:i})?e:null})();(0,s.Z)((()=>{b&&l(b)}),[b]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!x({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),p(e)}),[d,p,i]),tabValues:i}}var k=r(14185);const R={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var S=Object.defineProperty,E=Object.defineProperties,T=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))I.call(t,r)&&P(e,r,t[r]);if(A)for(var r of A(t))_.call(t,r)&&P(e,r,t[r]);return e},D=(e,t)=>E(e,T(t));function C({className:e,block:t,selectedValue:r,selectValue:o,tabValues:s}){const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),u=e=>{const t=e.currentTarget,a=l.indexOf(t),n=s[a].value;n!==r&&(c(t),o(n))},d=e=>{var t,r;let a=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;a=null!=(t=l[r])?t:l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;a=null!=(r=l[t])?r:l[l.length-1];break}}null==a||a.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.Z)("tabs",{"tabs--block":t},e)},s.map((({value:e,label:t,attributes:i})=>a.createElement("li",D(V({role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,key:e,ref:e=>l.push(e),onKeyDown:d,onClick:u},i),{className:(0,n.Z)("tabs__item",R.tabItem,null==i?void 0:i.className,{"tabs__item--active":r===e})}),null!=t?t:e))))}function L({lazy:e,children:t,selectedValue:r}){const n=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=n.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},n.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function q(e){const t=N(e);return a.createElement("div",{className:(0,n.Z)("tabs-container",R.tabList)},a.createElement(C,V(V({},e),t)),a.createElement(L,V(V({},e),t)))}function M(e){const t=(0,k.Z)();return a.createElement(q,V({key:String(t)},e),y(e.children))}},11674:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(63445);const n=!!a.Z.canUseDOM&&navigator.platform.startsWith("Mac"),i=!!a.Z.canUseDOM&&navigator.platform.startsWith("Win"),o={defaultGuide:"quickstart",defaultJsDebugger:"flipper",defaultOs:n?"macos":i?"windows":"linux",defaultPackageManager:"npm",defaultPlatform:n?"ios":"android",defaultSyntax:"functional",defaultAndroidLanguage:"java",defaultJavaScriptSpecLanguages:"typescript",getDevNotesTabs:(e=["android","ios","web","windows"])=>[e.includes("android")?{label:"Android",value:"android"}:void 0,e.includes("ios")?{label:"iOS",value:"ios"}:void 0,e.includes("web")?{label:"Web",value:"web"}:void 0,e.includes("windows")?{label:"Windows",value:"windows"}:void 0].filter(Boolean),guides:[{label:"Expo Go Quickstart",value:"quickstart"},{label:"React Native CLI Quickstart",value:"native"}],oses:[{label:"macOS",value:"macos"},{label:"Windows",value:"windows"},{label:"Linux",value:"linux"}],packageManagers:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],platforms:[{label:"Android",value:"android"},{label:"iOS",value:"ios"}],syntax:[{label:"Function Component",value:"functional"},{label:"Class Component",value:"classical"}],androidLanguages:[{label:"Java",value:"java"},{label:"Kotlin",value:"kotlin"}],javaScriptSpecLanguages:[{label:"TypeScript",value:"typescript"},{label:"Flow",value:"flow"}],jsDebuggers:[{label:"Hermes Debugger / Expo",value:"hermes"},{label:"Flipper",value:"flipper"},{label:"New Debugger (Experimental)",value:"new-debugger"}],snackLanguages:[{label:"TypeScript",value:"typescript"},{label:"JavaScript",value:"javascript"}],defaultSnackLanguage:"typescript"}},71426:(e,t,r)=>{var a=r(27378),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,i={},c=null,u=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},24246:(e,t,r)=>{e.exports=r(71426)},71670:(e,t,r)=>{r.d(t,{Zo:()=>s,ah:()=>i});var a=r(27378);const n=a.createContext({});function i(e){const t=a.useContext(n);return a.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const o={};function s({components:e,children:t,disableParentContext:r}){let s;return s=r?"function"==typeof e?e({}):e||o:i(e),a.createElement(n.Provider,{value:s},t)}}}]);